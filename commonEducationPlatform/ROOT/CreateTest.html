<!DOCTYPE html>
<html>
	<head>
		<meta charset="ISO-8859-1">
		<title>Create a test</title>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
		<script>
		function displayMoreOptions() 
		{
			if (document.getElementById("sel2").value == "1")
		    {
		        document.getElementById("noOfSections").style.display = "block";
		        document.getElementById("noOfSections").required = "true";
		        document.getElementById("noOfQuestions").style.display = "none";
		        if(document.getElementById("sel1").value == 2)
		        {
					document.getElementById("noOfQuestionsInQuestionBank").style.display = "none";
					document.getElementById("noOfQuestionsInQuestionBank").value = null;
		        }
		    }
		    else if (document.getElementById("sel2").value == "0")
		    {
		    	document.getElementById("noOfSections").style.display = "none";
		    	document.getElementById("nos").value = null;
		    	document.getElementById("noOfQuestions").style.display = "block";
		    	document.getElementById("noq").value = null;
		    	document.getElementById("errorOnSections").style.display = "none";
				document.getElementById("submit_button").disabled = false;
				document.getElementById("sections").style.display = "none";
				if(document.getElementById("sel1").value == 2)
		        {
					document.getElementById("noOfQuestionsInQuestionBank").style.display = "block";
		        }
		    }
		}
		
		function myFunction()
		{
			var already = document.getElementById("sectionWorkout").value;
			var noOfSections = document.getElementById("nos").value;
			document.getElementById("sectionWorkout").value = noOfSections;
						
			if(noOfSections <= 0)
			{
				document.getElementById("errorOnSections").style.display = "block";
				document.getElementById("submit_button").disabled = true;
			}
			else if(noOfSections > 0)
			{
				document.getElementById("errorOnSections").style.display = "none";
				document.getElementById("submit_button").disabled = false;
			}
			else
			{
				document.getElementById("errorOnSections").style.display = "block";
				document.getElementById("submit_button").disabled = true;
			}
			
			if((document.getElementById("sections").style.display != "block") || already >= 0)
			{
				
				var element = '';
				
				for(var i=0;i< noOfSections; i++)
				{
					document.getElementById("sections").style.display = "block";
					
					if(document.getElementById("sel1").value == 2)
			        {
						element = element + '<br><div class="input-group input-group-default"><div class="input-group-prepend"><span class="input-group-text" id="inputGroup-sizing-lg">Number of Questions in Section - '+(i+1)+' Question Bank</span></div><input type="text" class="form-control" aria-label="Large" name="QBsection-'+(i+1)+'" id="QBsection-'+(i+1)+'" aria-describedby="inputGroup-sizing-sm" placeholder="Enter number of questions in section-'+(i+1)+' Question Bank" required></div>' +'<br><div class="input-group input-group-default"><div class="input-group-prepend"><span class="input-group-text" id="inputGroup-sizing-lg">Number of Questions in Section - '+(i+1)+'</span></div><input type="text" class="form-control" aria-label="Large" name="section-'+(i+1)+'" id="section-'+(i+1)+'" aria-describedby="inputGroup-sizing-sm" placeholder="Enter number of questions in section-'+(i+1)+'" required></div>';
			        }
					else if(document.getElementById("sel1").value == 1)
					{
						element = element +'<br><div class="input-group input-group-default"><div class="input-group-prepend"><span class="input-group-text" id="inputGroup-sizing-lg">Number of Questions in Section - '+(i+1)+'</span></div><input type="text" class="form-control" aria-label="Large" name="section-'+(i+1)+'" id="section-'+(i+1)+'" aria-describedby="inputGroup-sizing-sm" placeholder="Enter number of questions in section-'+(i+1)+'" required></div>';
					}
				}
				document.getElementById("sections").innerHTML = element;
				
				element='';
				
			}
		}
		
		function changeTypeOfTest()
		{
			
			var typeOfTest = document.getElementById("sel3").value;
			if(typeOfTest == 1)
			{
				document.getElementById("totalTimeInMinutes").style.display = "none";
				document.getElementById("totalTime").value = null;
			}
			else
			{
				document.getElementById("totalTimeInMinutes").style.display = "block";
				document.getElementById("totalTime").value = null;
			}
			
		}
		
		function csv()
		{
			
		}
		
		function changeTestType()
		{
			var testType = document.getElementById("sel1").value;
			var splitType = document.getElementById("sel2").value;
			var already = document.getElementById("sectionWorkout").value;
			if(testType == 1 && (splitType == 0 || splitType == 1))
			{
				document.getElementById("sel2").selectedIndex = "0";
			}
			else if(testType == 2 && (splitType == 0 || splitType == 1))
			{
				document.getElementById("sel2").selectedIndex = "0";
			}
			document.getElementById("noOfSections").style.display = "none";
			document.getElementById("nos").value = null;
	    	document.getElementById("noOfQuestions").style.display = "none";
	    	document.getElementById("errorOnSections").style.display = "none";
			document.getElementById("submit_button").disabled = false;
			document.getElementById("sections").style.display = "none";
			if(document.getElementById("sel1").value == 2)
	        {
				document.getElementById("noOfQuestionsInQuestionBank").style.display = "none";
				document.getElementById("noOfQuestionsInQuestionBank").value = null;
	        }
		}
		</script>
	</head>

	<body>
		<div class="card border-0">
			<div class="card-header" style="background-color: #eaeced;">
				<h5>
					Exam Flux
					<form action="/Logout" method="post">
						<input name="Submit" type="submit" value="Logout" id="Logout"
							class="btn btn-secondary float-right">
					</form>
				</h5>
			</div>
		</div>
		
		<nav aria-label="breadcrumb">
			<ol class="breadcrumb">
				<li class="breadcrumb-item"><a href="/CoachingDashboard">Home</a></li>
				<li class="breadcrumb-item active" aria-current="page">Create Test</li>
			</ol>
		</nav>
		
		<div class="card border-secondary" style="margin-left: 5%; width: 60%;">
			<div class="card-header bg-dark text-white">
				<h5>Enter Test details</h5>
			</div>
	
			<div class="card-body">
				<form action="/TestDetails" method="post" autocomplete="off">
				
					<div class="input-group input-group-default">
						<div class="input-group-prepend">
							<span class="input-group-text" id="inputGroup-sizing-lg">Test Name</span>
						</div>
						<input type="text" class="form-control" aria-label="Large" name="testName" id="testName" aria-describedby="inputGroup-sizing-sm" placeholder="Enter test name" required>	
					</div>
					
					<br>
					
					<div class="input-group input-group-default">
						<div class="input-group-prepend">
							<span class="input-group-text" id="inputGroup-sizing-lg">Subject Name</span>
						</div>
						<input type="text" class="form-control" aria-label="Large" name="testSubject" aria-describedby="inputGroup-sizing-sm" placeholder="Enter subject name" required>	
					</div>
					
					<br>
					
					<div class="input-group input-group-default">
						<div class="input-group-prepend">
							<span class="input-group-text" id="inputGroup-sizing-lg">Type of Test</span>
						</div>
		  				<select class="form-control" name="testType" id="sel1" onchange="changeTestType()" required>
		  					<option disabled selected value>Select type of Test</option>
						    <option value="1">Simple Test</option>
						    <option value="2" disabled>Test from question bank</option>   
					  	</select>
					</div>
					
					<br>
					
					<div class="input-group input-group-default">
						<div class="input-group-prepend">
							<span class="input-group-text" id="inputGroup-sizing-lg">Time Limit</span>
						</div>
		  				<select class="form-control" name="timeLimitType" id="sel3" onchange="changeTypeOfTest()" required>
		  					<option disabled selected value>Select time limit</option>
						    <option value="1">Time limit on each question</option>
						    <option value="2">Time limit on overall test</option>   
					  	</select>
					</div>
					
					<div  style="display:block" id="totalTimeInMinutes">
						<br>		
						<div class="input-group input-group-default">
							<div class="input-group-prepend">
								<span class="input-group-text" id="inputGroup-sizing-lg">Total time (in minutes)</span>
							</div>
						<input type="text" class="form-control" aria-label="Large" name="totalTime" id="totalTime" aria-describedby="inputGroup-sizing-sm" placeholder="Enter total time in minutes">	
						</div>
					</div>
					
					<br>
					
					<div class="input-group input-group-default">
						<div class="input-group-prepend">
							<span class="input-group-text" id="inputGroup-sizing-lg">Split Test into different sections?</span>
						</div>
		  				<select class="form-control" name="splitSections" id="sel2" onchange="displayMoreOptions()" required>
		  					<option disabled selected value>--Select--</option>
						    <option value="1">Yes</option>
						    <option value="0">No</option>   
					  	</select>
					</div>
					
					<div style="display:none" id="noOfSections">
						<br>
						<div class="input-group input-group-default">
							<div class="input-group-prepend">
								<span class="input-group-text" id="inputGroup-sizing-lg">Number of Sections</span>
							</div>
							<input type="text" class="form-control" aria-label="Large" name="numberOfSections" id="nos" aria-describedby="inputGroup-sizing-sm" placeholder="Enter number of sections" onfocusout="myFunction()" >	
						</div>
					</div>
					
					<div style="display:none" id="errorOnSections">
    					<span style="color:red;">Number of Sections cannot be zero, alphanumeric or negative.</span>
					</div>
					
					<div style="display:none" id="sections">
						
					</div>
					
					<div style="display:none" id="noOfQuestionsInQuestionBank">
						<br>
						<div class="input-group input-group-default">
							<div class="input-group-prepend">
								<span class="input-group-text" id="inputGroup-sizing-lg">Number of questions in Question Bank</span>
							</div>
							<input type="text" class="form-control" aria-label="Large" name="noqQB" id="noqQB" aria-describedby="inputGroup-sizing-sm" placeholder="Enter number of questions in Question Bank">	
						</div>
					</div>
					
					
					<div style="display:none" id="noOfQuestions">
						<br>
						<div class="input-group input-group-default">
							<div class="input-group-prepend">
								<span class="input-group-text" id="inputGroup-sizing-lg">Number of questions in Test</span>
							</div>
							<input type="text" class="form-control" aria-label="Large" name="noq" id="noq" aria-describedby="inputGroup-sizing-sm" placeholder="Enter number of questions in Test">	
						</div>
					</div>
					
					
					<br>
					
					<div class="input-group input-group-default">
						<div class="input-group-prepend">
							<span class="input-group-text" id="inputGroup-sizing-lg">Total Marks</span>
						</div>
						<input type="text" class="form-control" aria-label="Large" name="totalMarks" aria-describedby="inputGroup-sizing-sm" placeholder="Enter Total Marks" required>	
					</div>
					
					
					
					<br>
					
					<input type="hidden" id="sectionWorkout" name="sectionWorkout" value="-1">
					
					<div class="input-group input-group-default">
						<input type="submit" name="submit_button" id="submit_button" class="btn btn-dark" value="Proceed to question creation" onclick="csv()">
					</div>
			
				</form>
			</div>
		</div>
	</body>
</html>